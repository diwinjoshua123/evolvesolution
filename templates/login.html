{% extends 'base.html' %}

{% block title %}Login / Sign Up - Evolve Solution{% endblock %}

{% block content %}
<section class="login-section"
    style="background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); min-height: 80vh; display: flex; align-items: center; justify-content: center; padding: 2rem;">
    <div class="auth-container"
        style="background: white; padding: 3rem; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); width: 100%; max-width: 450px;">

        <!-- Toggle Buttons -->
        <div class="auth-toggle" style="display: flex; margin-bottom: 2rem; border-bottom: 2px solid #f1f5f9;">
            <button id="loginBtn" class="active" onclick="showLogin()"
                style="flex: 1; padding: 1rem; border: none; background: none; font-weight: 600; color: var(--primary-color); border-bottom: 2px solid var(--primary-color); cursor: pointer;">Login</button>
            <button id="registerBtn" onclick="showRegister()"
                style="flex: 1; padding: 1rem; border: none; background: none; font-weight: 600; color: #94a3b8; cursor: pointer;">Sign
                Up</button>
        </div>

        {% with messages = get_flashed_messages() %}
        {% if messages %}
        <div class="flash-messages" style="margin-bottom: 1.5rem;">
            {% for message in messages %}
            <div
                style="padding: 0.8rem; border-radius: 8px; background-color: #fee2e2; color: #dc2626; border: 1px solid #fecaca; font-size: 0.9rem;">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}
        {% endwith %}

        <!-- Login Form -->
        <form id="loginForm" method="POST" action="{{ url_for('login') }}">
            <h2 style="color: var(--primary-color); margin-bottom: 1.5rem;">Welcome Back</h2>
            <div class="form-group" style="margin-bottom: 1.5rem;">
                <label style="display: block; margin-bottom: 0.5rem; color: #64748b; font-size: 0.9rem;">Email
                    Address</label>
                <input type="email" name="email" required
                    style="width: 100%; padding: 0.8rem; border: 1px solid #cbd5e1; border-radius: 8px; outline: none; transition: border-color 0.3s;">
            </div>
            <div class="form-group" style="margin-bottom: 2rem;">
                <label
                    style="display: block; margin-bottom: 0.5rem; color: #64748b; font-size: 0.9rem;">Password</label>
                <input type="password" name="password" required
                    style="width: 100%; padding: 0.8rem; border: 1px solid #cbd5e1; border-radius: 8px; outline: none; transition: border-color 0.3s;">
            </div>
            <button type="submit" class="btn btn-primary"
                style="width: 100%; padding: 1rem; border-radius: 8px;">Login</button>
        </form>

        <!-- Register Form (Hidden by default) -->
        <form id="registerForm" method="POST" action="{{ url_for('register') }}" style="display: none;">
            <h2 style="color: var(--primary-color); margin-bottom: 1.5rem;">Create Account</h2>
            <div class="form-group" style="margin-bottom: 1.5rem;">
                <label
                    style="display: block; margin-bottom: 0.5rem; color: #64748b; font-size: 0.9rem;">Username</label>
                <input type="text" name="username" required
                    style="width: 100%; padding: 0.8rem; border: 1px solid #cbd5e1; border-radius: 8px; outline: none; transition: border-color 0.3s;">
            </div>
            <div class="form-group" style="margin-bottom: 1.5rem;">
                <label style="display: block; margin-bottom: 0.5rem; color: #64748b; font-size: 0.9rem;">Email
                    Address</label>
                <input type="email" name="email" required
                    style="width: 100%; padding: 0.8rem; border: 1px solid #cbd5e1; border-radius: 8px; outline: none; transition: border-color 0.3s;">
            </div>
            <div class="form-group" style="margin-bottom: 2rem;">
                <label
                    style="display: block; margin-bottom: 0.5rem; color: #64748b; font-size: 0.9rem;">Password</label>
                <input type="password" name="password" required
                    style="width: 100%; padding: 0.8rem; border: 1px solid #cbd5e1; border-radius: 8px; outline: none; transition: border-color 0.3s;">
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%; padding: 1rem; border-radius: 8px;">Sign
                Up</button>
        </form>
    </div>
</section>

<script>
    function showLogin() {
        document.getElementById('loginForm').style.display = 'block';
        document.getElementById('registerForm').style.display = 'none';

        document.getElementById('loginBtn').classList.add('active');
        document.getElementById('registerBtn').classList.remove('active');

        document.getElementById('loginBtn').style.color = 'var(--primary-color)';
        document.getElementById('loginBtn').style.borderBottom = '2px solid var(--primary-color)';

        document.getElementById('registerBtn').style.color = '#94a3b8';
        document.getElementById('registerBtn').style.borderBottom = 'none';
    }

    function showRegister() {
        document.getElementById('loginForm').style.display = 'none';
        document.getElementById('registerForm').style.display = 'block';

        document.getElementById('registerBtn').classList.add('active');
        document.getElementById('loginBtn').classList.remove('active');

        document.getElementById('registerBtn').style.color = 'var(--primary-color)';
        document.getElementById('registerBtn').style.borderBottom = '2px solid var(--primary-color)';

        document.getElementById('loginBtn').style.color = '#94a3b8';
        document.getElementById('loginBtn').style.borderBottom = 'none';
    }
</script>
{% endblock %}